# 通用工具函数库 (Utils) 深度流证

## 简介
提供跨模块、跨端的纯逻辑工具，降低重复代码。

## 核心工具详细流证

### 1. 响应处理 (response.go - 后端)
- `Success(c, data)`: 返回 200 状态码，`code: 200`, `message: OK`。
- `Fail(c, code, message)`: 返回 200 状态码（为了前端拦截器统一处理），`code` 为自定义错误码。

### 2. 存储管理 (storage.ts - 前端)
- **local**: 基于 `localStorage` 的强类型封装，支持 JSON 自动解析。
- **session**: 基于 `sessionStorage` 的强类型封装。
- 关键方法：`set`, `get`, `remove`, `clear`。

### 3. 图标渲染 (icon.ts - 前端)
- `renderIcon(icon, props)`: 返回一个渲染函数，支持 Naive UI 的 `NIcon`。支持从本地 SVG 资源、图标库名称或组件直接渲染。
- `createIcon(icon, props)`: 直接返回 `VNode`。

### 4. 树形转换 (array.ts - 前端)
- `arrayToTree(arr)`: 核心算法。将扁平化的数据库记录（包含 `id` 和 `parentId`）转换为嵌套的树形结构，常用于菜单和部门树的生成。

### 5. 数据标准化 (normalize.ts - 前端)
- `normalizeSizeUnits(bytes)`: 将字节大小转换为可读格式（如 `1.5 MB`, `20 KB`）。

### 6. 国际化辅助 (i18n.ts - 前端)
- `setLocale(locale)`: 切换当前应用的语言环境。
- `naiveI18nOptions`: 提供 Naive UI 组件库自身的国际化翻译映射。

### 7. 极验管理 (geetest.ts - 前端)
- `GeetestManager`: 单例模式。负责极验验证码的加载、初始化及校验结果头信息的管理。

## 开发规范
- 后端工具包名必须为 `utils`。
- 前端工具必须提供详细的 TS 类型定义。
