# Go+Vue 高扩展性 MVC 插件系统架构方案

本项目是一个基于 Go (Gin) 和 Vue3 (Nova-Admin) 的高扩展性、模块化管理系统底座。旨在为未来的 SaaS、商城、APP 等多场景提供统一的开发标准和扩展能力。

## 1. 目录结构规划

```text
/fst (项目根目录)
├── backend/                # Golang 后端
│   ├── cmd/                # 程序入口
│   │   └── main.go         # 启动文件
│   ├── app/                # MVC 核心业务
│   │   ├── controllers/    # C: 控制器 (区分 admin/user/public)
│   │   ├── models/         # M: 模型 (定义 DB 结构，支持软删除)
│   │   ├── services/       # Service 层: 复杂业务逻辑处理
│   │   └── plugins/        # 插件系统 (定义接口与动态加载逻辑)
│   ├── internal/           # 内部核心组件
│   │   ├── db/             # 数据库初始化 (MySQL 原生/sqlx)
│   │   ├── middleware/     # 中间件 (Auth, Geetest, Logger)
│   │   └── config/         # 配置管理 (.env 解析)
│   ├── routes/             # 路由定义
│   └── utils/              # 工具类 (JWT, 加密, 极验验证)
├── frontend/               # Vue 前端 (由 nova-admin 定制)
│   ├── src/
│   │   ├── views/          # 视图 (区分 user 和 admin)
│   │   ├── router/         # 路由配置 (支持动态路由及自定义路径)
│   │   └── service/        # API 请求封装
│   └── vite.config.ts      # Vite 配置 (实现 Admin JS 隔离打包)
├── dist/                   # 前端打包产物 (Go 会静态嵌入此目录)
├── .env                    # 环境配置文件
├── go.mod                  # Go 模块定义
└── README.md
```

## 2. 核心设计要点

### 2.1 后端架构 (Golang)
- **核心框架**: `Gin` + `MySQL` 原生驱动 (sqlx)。
- **MVC 模式**: 严格区分模型、服务、控制器。
- **插件化扩展**: 
    - 使用 `interface` 定义插件契约。
    - 插件可动态注册路由、挂载中间件、执行独立数据库迁移。
- **单文件部署**: 利用 `embed` 将前端打包后的 `dist` 目录嵌入二进制文件。

### 2.2 前端架构 (Vue3)
- **基础模板**: 基于 `chansee97/nova-admin` 进行定制。
- **路由策略**: 
    - 用户端与管理端路径隔离。
    - 管理端路径可通过 `.env` 配置，防止暴露后台入口。
- **安全加固**:
    - **JS 物理隔离**: 管理端专用业务逻辑通过 Vite 打包为独立 Chunk。
    - **延迟加载**: 只有校验通过后才动态加载管理端资源，防止敏感接口被分析。

### 2.3 数据库规范
- **通用字段**: 所有表统一包含 `id (bigint)`, `created_at`, `updated_at`, `deleted_at (软删除标记)`。
- **数据完整性**: 逻辑上实现外键约束，物理上保持解耦以提升性能。

### 2.4 安全性
- **极验验证 (Geetest)**: 登录、注册等敏感接口强制集成极验第四代行为验证。

## 3. 实施路线图

1. **环境初始化**: 拉取 `nova-admin`，配置 Go 基础环境。
2. **MVC 底座**: 实现数据库连接、中间件拦截、基础路由。
3. **插件系统设计**: 定义插件生命周期与注册机制。
4. **前端定制**: 实现管理端与用户端的路由隔离及 JS 资源加密/混淆/隔离。
5. **打包分发**: 编写打包脚本，验证单文件运行效果。
